## **带有access_token的response示例**
![image](http://linkdust.xicp.net:50843/images/response_demo.png)

## **操作码表**

操作码   |  相关信息
---     |   --- 
1000    |   手机号码不能为空
1001    |   密码不能为空
1002    |   角色不能为空
1003    |   用户角色的值只能为"0"或"1"
1004    |   手机号码无效
1005    |   密码解密失败
1006    |   学号不能为空
1007    |   课程名称不能为空
1008    |   查询条件不能为空
1009    |   签到类型的值只能为0、1、2
1015    |   服务器没接收到上传的文件
1016    |   不存在该默认图片
1017    |   签到记录的状态的值只能为0、1、2
1018    |   签到记录的类型的值只能为0、1
2000    |   手机号码或密码不能为空
2001    |   手机号码或密码错误
2002    |   该手机号码已被注册
2003    |   用户不存在
3000    |   验证码错误或者已被验证
3001    |   该验证码尚未被验证
3002    |   该号码已达到短信验证码发送上限
3004    |   无效的smsid
4000    |   签到失败，该签到不存在
4001    |   签到失败，该签到没有对应某个课程
4002    |   IP地址不能为空
4003    |   定位失败
4004    |   教师尚未定位，无法进行签到
4005    |   尚未设置学号，无法进行签到
4006    |   该学生不属于这门课程，无法进行签到
4007    |   签到尚未开始
4008    |   签到已结束
5000    |   课程不存在
5001    |   该课程暂无相关签到
5002    |   该课程暂无相关教师
401     |   认证信息有误
402     |   认证信息已失效
403     |   无权限访问该资源
500     |   内部服务器错误
200     |   操作成功
1019    |   查询日期不能为空
4009    |   该学生已经参与过本次签到
4010    |   该手机已经参与过本次签到
4011    |   该学生尚未注册
4012    |   相应课程没有导入该学生信息
6000    |   缺少发言者Id
7000    |   反馈内容不能为空

## 实时通讯
1. 建立连接 url: http://linkdust.xicp.net:50843/sign
2. 客户端监听事件（签到）
    + notice 
3. 客户端触发事件（签到）
    + student-in
    + student-out
4. 客户端监听事件（聊天室）
    + room-list
    + msg-list
    + new-msg   
5. 客户端触发事件（聊天室）
    + room-list
    + msg-list
    + new-msg
  
## 事件描述
1. notice
    + 每当学生的签到被教师处理时，会触发该事件
    + 参数：空字符串
2. student-in 
    + 客户端只有触发了该事件，才能接收到notice事件
    + 参数：studentId
3. student-out
    + 客户端触发了该事件，则不会再收到notice事件
    + 参数：studentId
4. room-list
    + 客户端触发该事件后，可以监听该事件，以获得相关聊天室信息
    + 触发参数：studentId, teacherId（选择其中一个参数进行设置，另一个参数为空字符串即可）
    + 接收参数：code, data, msg（与http返回结果一致，data则为聊天室信息）
    + data 结构：
        + courseId 课程id
        + name 聊天室名字（即课程名）
        + avatar 聊天室头像（暂时为教师头像）
        + count 参与聊天室的人数
        + msg 最近一条信息（参考下述信息对象结构）
5. msg-list
    + 客户端触发该事件后，可以监听该事件，以获得特定聊天室的信息列表
    + 触发参数：courseId, page, limit（page默认0，limit默认18）
    + 接收参数：code, data, msg（与http返回结果一致，data则为信息列表）
    + data 结构：信息对象数组，参考下述信息对象结构        
6. new-msg
    + 客户端想要发送信息，则触发该事件，监听该事件时则会实时获得他人发送的新信息，但不会接收到自己发送的新信息
    + 触发参数：courseId, studentId, content, teacherId（studentId, teacherId选择一个进行设置，另一个则为空字符串）
    + 接收参数：code, data, msg（与http返回结果一致，data则为新信息）
    + data 结构：信息对象
        + courseId 课程id
        + studentId 不为空，代表学生发送
        + teacherId 不为空，代表教师发送
        + content 信息内容
        + avatar 信息发送者头像
        + name 信息发送者姓名
        + createdAt 信息发送时间