<div *ngIf="sign">

<div class="title">
  <span [style.background-color]="sign.color">{{sign.courseName}}</span>
</div>
<div class="info wrap" *ngIf="!isLargeQRCode">
  <ul class="status-list">
    <li><label>开始时间</label><span>{{sign.startTime}}</span></li>
    <li><label>结束时间</label><span>{{sign.endTime}}</span></li>
    <li><label>签到状态</label><span [style.color]="signStates[sign.state].color">{{signStates[sign.state].text}}</span></li>
  </ul>
  <div class="qr-code" (click)="ToggleQRCodeSize()">
    <qr-code [data]="sign.code" [size]="'120'"></qr-code>
    <div class="qr-code-tip">点我放大</div>
  </div>
  <div class="sign-in">
    <circle-progress [nowValue]="sign.signIn" [maxValue]="sign.studentCount" 
        [fontSize]="18" [fontColor]="'gray'" [boxSize]="140" 
        [radius]="70" [border]="12" [backgroundColor]="'#DDD'"        
        [lowColor]="'#97CC00'" [middleColor]="'#97CC00'" [interColor]="'#97CC00'" [highColor]="'#97CC00'">
    </circle-progress>
  </div>
</div>
<div class="body" *ngIf="!isLargeQRCode">
  <div class="radio-group">
    <button type="button" [class.inactive]="radiosInactive[0]" (click)="selectRadio(0)">课前</button>
    <button type="button" [class.inactive]="radiosInactive[1]" (click)="selectRadio(1)">课后</button>
  </div>  
  <ul class="sign-in-list">
    <li *ngFor="let r of records">
      <img class="avatar" [src]="r.studentAvatar" onerror="javascript:this.src='/public/images/default.png'" />
      <div>{{r.studentName}}</div>
      <div class="red-font">{{r.distance}}m</div>
      <div class="confirm-group wrap" *ngIf="r.state == 0">
        <button type="button" class="confirm-btn"></button>
        <button type="button" class="cancel-btn"></button>
      </div>
      <div class="confirm-state" *ngIf="r.state != 0">
        <span class="green-font" [hidden]="r.state != 1">已准许</span>
        <span class="red-font" [hidden]="r.state != 2">已拒绝</span>
      </div>      
    </li>    
  </ul>
  <div class="no-sign-tip" *ngIf="records.length <= 0">暂无学生签到</div>
  <div class="all-confirm-group" *ngIf="records.length > 0">
    <button type="button" class="blue">全部同意</button>
    <button type="button" class="red">全部拒绝</button>
  </div>
</div>

<div class="big-qr-code" *ngIf="isLargeQRCode">
    <qr-code [data]="sign.code" [size]="'350'" (click)="ToggleQRCodeSize()"></qr-code>
    <div class="qrcode">Code: <span class="qrcode-num">{{sign.code}}</span></div>
    <div class="qr-code-tip">点我缩小</div>
</div>

</div>

<pop-up></pop-up>